include "divio", "divstr", "divvec", "divmap", "divpair", "divptr" : *;

func main(argc: i32, argv[]: i8*) -> i32 {
    let mut a: i32 = 32;
    let b: i32 = 12;
    let c: i32 = a + b;
    a = 55;

    printf("Hello, World! %d + %d = %d\n", a, b, c);

    let mut i: i32 = 0;

    while i < 10 {
        i += 1;

        if i == 5 {
            continue;
        }

        if i == 8 {
            break;
        }

        printf("%d\n", i);
    }

    let mut test: i32 = 0;
    let mut ref: i32& = test;
    ref = 42;

    printf("test = %d\n", test);

    let mut str: String;
    printf("size = %d, data = %s\n", str.Size(), str.Data());
    str = "Hello, World!";
    printf("size = %d, data = %s\n", str.Size(), str.Data());
    str += "\nGoodbye, World!";
    printf("size = %d, data = %s\n", str.Size(), str.Data());

    let big: u128 = 12345678901234567890u128;
    printf("big = %llu\n", false ? big : 69u128);

    let mut map: Map<String, i32>;
    map[String("one")] = 1;
    map[String("two")] = 2;
    map[String("three")] = 3;

    printf("map[one] = %d\n", map[String("one")]);
    printf("map[two] = %d\n", map[String("two")]);
    printf("map[three] = %d\n", map[String("three")]);

    let mut ptr: SharedPtr<i32>;
    ptr.Ptr()[0] = 42;
    printf("value = %d, ptr = %p, count = %d\n", *ptr.Ptr(), ptr.Ptr(), ptr.Count());

    {
        let mut ptr2: SharedPtr<i32> = ptr;
        ptr2.Ptr()[0] = 31;
        printf("value = %d, ptr = %p, count = %d\n", *ptr.Ptr(), ptr.Ptr(), ptr.Count());
    }

    printf("value = %d, ptr = %p, count = %d\n", *ptr.Ptr(), ptr.Ptr(), ptr.Count());

    let mut vec: Vector<i32>;
    vec.PushBack(1);
    vec.PushBack(2);
    vec.PushBack(3);
    vec.Pop(1u64);

    let mut index: u64 = 0u64;

    while vec.Size() > index {
        printf("vec[%d] = %d\n", index, vec[index]);
        index += 1u64;
    }

    ret 0i32;
}